{"version":3,"sources":["../src/index.ts","../src/components/ResiumEntityContextMenu.tsx"],"sourcesContent":["export { default } from './components/ResiumEntityContextMenu';\r\nexport type { MenuItem, PositionOffset, ResiumEntityContextMenuProps } from './types';\r\n","import { Entity, Viewer } from 'cesium';\r\nimport React, { useEffect, useRef, useState, useCallback } from 'react';\r\nimport ReactDOM from 'react-dom';\r\n\r\nexport type MenuItem = {\r\n  id: string;\r\n  label: string;\r\n  icon?: React.ReactNode;\r\n  disabled?: boolean;\r\n  separator?: boolean;\r\n  meta?: any;\r\n};\r\n\r\nexport type PositionOffset = { x: number; y: number };\r\n\r\nexport interface ResiumEntityContextMenuProps {\r\n  entity?: Entity | undefined;\r\n  getMenuItems: (entity?: Entity | string) => MenuItem[] | Promise<MenuItem[]>;\r\n  renderMenuItem?: (item: MenuItem) => React.ReactNode;\r\n  onSelect?: (item: MenuItem, entity?: Entity | string) => void | Promise<void>;\r\n  openOn?: 'rightClick' | 'leftClick' | 'hover' | 'longPress';\r\n  positionOffset?: PositionOffset;\r\n  portal?: boolean;\r\n  closeOnOutsideClick?: boolean;\r\n  keyboardNavigation?: boolean;\r\n  className?: string;\r\n  style?: React.CSSProperties;\r\n  disabled?: boolean;\r\n  zIndex?: number;\r\n  viewer?: Viewer | null;\r\n  hoverDelay?: number;\r\n  longPressDuration?: number;\r\n  debug?: boolean;\r\n}\r\n\r\nconst clamp = (value: number, min: number, max: number) => Math.max(min, Math.min(max, value));\r\n\r\nexport default function ResiumEntityContextMenu(props: ResiumEntityContextMenuProps) {\r\n  const {\r\n    entity,\r\n    getMenuItems,\r\n    renderMenuItem,\r\n    onSelect,\r\n    openOn = 'rightClick',\r\n    positionOffset = { x: 4, y: 4 },\r\n    portal = true,\r\n    closeOnOutsideClick = true,\r\n    keyboardNavigation = true,\r\n    className = '',\r\n    style = {},\r\n    disabled = false,\r\n    zIndex = 3000,\r\n    viewer = null,\r\n    hoverDelay = 250,\r\n    longPressDuration = 500,\r\n    debug = false,\r\n  } = props;\r\n\r\n  const log = useCallback(\r\n    (...args: any[]) => {\r\n      if (debug) {\r\n        console.log('üéØ ResiumEntityContextMenu:', ...args);\r\n      }\r\n    },\r\n    [debug],\r\n  );\r\n\r\n  const [open, setOpen] = useState(false);\r\n  const [x, setX] = useState<number>(0);\r\n  const [y, setY] = useState<number>(0);\r\n  const [items, setItems] = useState<MenuItem[] | null>(null);\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState<string | null>(null);\r\n  const [focusIndex, setFocusIndex] = useState<number>(-1);\r\n\r\n  const callIdRef = useRef(0);\r\n  const menuRef = useRef<HTMLDivElement | null>(null);\r\n  const itemsRefs = useRef<Array<HTMLButtonElement | null>>([]);\r\n  const hoverTimerRef = useRef<number | null>(null);\r\n  const longPressTimerRef = useRef<number | null>(null);\r\n\r\n  const setItemRef = useCallback((el: HTMLButtonElement | null, idx: number) => {\r\n    itemsRefs.current[idx] = el;\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    log('Component mounted with entity:', entity);\r\n    log('Viewer available:', !!viewer);\r\n    log('OpenOn mode:', openOn);\r\n  }, [entity, viewer, openOn, log]);\r\n\r\n  const getParentEntity = useCallback(() => {\r\n    log('Getting parent entity...');\r\n\r\n    if (entity) {\r\n      log('Entity provided via props:', entity);\r\n      return entity;\r\n    }\r\n\r\n    log('Searching for entity in contexts...');\r\n\r\n    try {\r\n      const contexts = [\r\n        (window as any).__RESIUM_CONTEXT__,\r\n        (window as any).RESIUM_CONTEXT,\r\n        (React as any).__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED?.ReactCurrentOwner,\r\n      ];\r\n\r\n      contexts.forEach((context, i) => {\r\n        log(`Context ${i}:`, context);\r\n      });\r\n    } catch (e) {\r\n      log('Context search failed:', e);\r\n    }\r\n\r\n    log('No entity found, returning undefined');\r\n    return undefined;\r\n  }, [entity, log]);\r\n\r\n  const getViewerFromWindow = useCallback(() => {\r\n    log('Getting viewer...');\r\n\r\n    if (viewer) {\r\n      log('Viewer provided via props:', viewer);\r\n      return viewer;\r\n    }\r\n\r\n    try {\r\n      const cesiumWidget = document.querySelector('.cesium-widget') as any;\r\n      log('Cesium widget found:', !!cesiumWidget);\r\n\r\n      if (cesiumWidget?.cesiumWidget) {\r\n        log('Cesium widget instance found');\r\n        return cesiumWidget.cesiumWidget.scene;\r\n      }\r\n\r\n      const canvas = document.querySelector('canvas.cesium-canvas') as any;\r\n      log('Cesium canvas found:', !!canvas);\r\n\r\n      const cesium = (window as any).Cesium;\r\n      log('Global Cesium available:', !!cesium);\r\n    } catch (e) {\r\n      log('Viewer search failed:', e);\r\n    }\r\n\r\n    log('No viewer found');\r\n    return null;\r\n  }, [viewer, log]);\r\n\r\n  const isTargetEntity = useCallback(\r\n    (pickedEntity: Entity | null): boolean => {\r\n      log('Checking if picked entity matches target...');\r\n      log('Picked entity:', pickedEntity);\r\n\r\n      if (!pickedEntity) {\r\n        log('No entity picked');\r\n        return false;\r\n      }\r\n\r\n      const parentEntity = getParentEntity();\r\n      log('Parent entity:', parentEntity);\r\n\r\n      if (!parentEntity) {\r\n        log('No parent entity - allowing click (fallback)');\r\n        return true;\r\n      }\r\n\r\n      const directMatch = pickedEntity === parentEntity;\r\n      log('Direct reference match:', directMatch);\r\n\r\n      const stringMatch = typeof parentEntity === 'string' && pickedEntity.id === parentEntity;\r\n      log('String ID match:', stringMatch);\r\n\r\n      const idMatch =\r\n        typeof parentEntity === 'object' && pickedEntity.id === (parentEntity as Entity).id;\r\n      log('Object ID match:', idMatch);\r\n\r\n      const result = directMatch || stringMatch || idMatch;\r\n      log('Final match result:', result);\r\n\r\n      return result;\r\n    },\r\n    [getParentEntity, log],\r\n  );\r\n\r\n  const handleGlobalClick = useCallback(\r\n    (event: MouseEvent | TouchEvent) => {\r\n      log('üñ±Ô∏è Global click detected!');\r\n      log('Event type:', event.type);\r\n      log('Event target:', event.target);\r\n\r\n      const currentViewer = getViewerFromWindow();\r\n      if (!currentViewer) {\r\n        log('‚ùå No viewer available for picking');\r\n        const clientX = 'clientX' in event ? event.clientX : event.touches?.[0]?.clientX || 0;\r\n        const clientY = 'clientY' in event ? event.clientY : event.touches?.[0]?.clientY || 0;\r\n        log('üêõ DEBUG: Opening menu anyway at', clientX, clientY);\r\n        void openMenuAt(clientX, clientY);\r\n        return;\r\n      }\r\n\r\n      log('‚úÖ Viewer found, attempting pick...');\r\n\r\n      const clientX = 'clientX' in event ? event.clientX : event.touches?.[0]?.clientX || 0;\r\n      const clientY = 'clientY' in event ? event.clientY : event.touches?.[0]?.clientY || 0;\r\n      log('Click coordinates:', { clientX, clientY });\r\n\r\n      try {\r\n        const canvas = currentViewer.canvas || document.querySelector('canvas.cesium-canvas');\r\n        log('Canvas found:', !!canvas);\r\n\r\n        if (!canvas) {\r\n          log('‚ùå No canvas found');\r\n          return;\r\n        }\r\n\r\n        const rect = canvas.getBoundingClientRect();\r\n        const x = clientX - rect.left;\r\n        const y = clientY - rect.top;\r\n        log('Canvas-relative coordinates:', { x, y });\r\n\r\n        let picked: any = null;\r\n        if (currentViewer.pick && typeof currentViewer.pick === 'function') {\r\n          log('Using viewer.pick...');\r\n          picked = currentViewer.pick({ x, y });\r\n        } else if (currentViewer.scene?.pick) {\r\n          log('Using viewer.scene.pick...');\r\n          picked = currentViewer.scene.pick({ x, y });\r\n        } else {\r\n          log('‚ùå No pick method available');\r\n        }\r\n\r\n        log('Pick result:', picked);\r\n\r\n        const pickedEntity = picked && picked.id ? picked.id : null;\r\n        log('Picked entity:', pickedEntity);\r\n\r\n        if (isTargetEntity(pickedEntity)) {\r\n          log('‚úÖ Target entity matches! Opening menu...');\r\n          void openMenuAt(clientX, clientY);\r\n        } else {\r\n          log('‚ùå Target entity does not match');\r\n        }\r\n      } catch (error) {\r\n        log('‚ùå Pick failed:', error);\r\n        log('üêõ DEBUG: Opening menu anyway due to pick failure');\r\n        void openMenuAt(clientX, clientY);\r\n      }\r\n    },\r\n    [getViewerFromWindow, isTargetEntity, log],\r\n  );\r\n\r\n  const loadMenuItems = useCallback(\r\n    async (entityArg?: Entity | string) => {\r\n      log('Loading menu items for entity:', entityArg);\r\n\r\n      const myCall = ++callIdRef.current;\r\n      setLoading(true);\r\n      setError(null);\r\n      setItems(null);\r\n\r\n      try {\r\n        const targetEntity = entityArg || getParentEntity();\r\n        log('Target entity for menu items:', targetEntity);\r\n\r\n        const res = await getMenuItems(targetEntity);\r\n        log('Menu items loaded:', res);\r\n\r\n        if (callIdRef.current === myCall) {\r\n          setItems(res || []);\r\n          setLoading(false);\r\n          setError(null);\r\n\r\n          const firstIndex = (res || []).findIndex((it) => !it.disabled && !it.separator);\r\n          setFocusIndex(firstIndex >= 0 ? firstIndex : -1);\r\n        }\r\n      } catch (e) {\r\n        log('‚ùå Failed to load menu items:', e);\r\n        if (callIdRef.current === myCall) {\r\n          setItems(null);\r\n          setLoading(false);\r\n          setError('Fehler beim Laden der Men√ºeintr√§ge');\r\n        }\r\n      }\r\n    },\r\n    [getMenuItems, getParentEntity, log],\r\n  );\r\n\r\n  const openMenuAt = useCallback(\r\n    async (clientX: number, clientY: number) => {\r\n      log('üéØ Opening menu at:', { clientX, clientY });\r\n\r\n      if (disabled) {\r\n        log('‚ùå Menu is disabled');\r\n        return;\r\n      }\r\n\r\n      setX(clientX + positionOffset.x);\r\n      setY(clientY + positionOffset.y);\r\n      setOpen(true);\r\n\r\n      log('‚úÖ Menu state set to open');\r\n\r\n      const targetEntity = getParentEntity();\r\n      await loadMenuItems(targetEntity);\r\n    },\r\n    [disabled, positionOffset, getParentEntity, loadMenuItems, log],\r\n  );\r\n\r\n  const closeMenu = useCallback(() => {\r\n    log('Closing menu');\r\n    setOpen(false);\r\n    setItems(null);\r\n    setLoading(false);\r\n    setError(null);\r\n    setFocusIndex(-1);\r\n    callIdRef.current++;\r\n  }, [log]);\r\n\r\n  const handleItemSelect = useCallback(\r\n    async (item: MenuItem) => {\r\n      log('Menu item selected:', item);\r\n      try {\r\n        const targetEntity = getParentEntity();\r\n        await onSelect?.(item, targetEntity);\r\n      } catch (error) {\r\n        log('‚ùå Error selecting menu item:', error);\r\n      } finally {\r\n        closeMenu();\r\n      }\r\n    },\r\n    [onSelect, getParentEntity, closeMenu, log],\r\n  );\r\n\r\n  useEffect(() => {\r\n    if (disabled) {\r\n      log('Event listeners disabled');\r\n      return;\r\n    }\r\n\r\n    log('üéß Setting up event listeners for:', openOn);\r\n\r\n    const onContextMenu = (ev: MouseEvent) => {\r\n      if (openOn !== 'rightClick') return;\r\n      log('üñ±Ô∏è Right click detected');\r\n      ev.preventDefault();\r\n      handleGlobalClick(ev);\r\n    };\r\n\r\n    const onLeftClick = (ev: MouseEvent) => {\r\n      if (openOn !== 'leftClick' || ev.button !== 0) return;\r\n      log('üñ±Ô∏è Left click detected');\r\n      handleGlobalClick(ev);\r\n    };\r\n\r\n    document.addEventListener('contextmenu', onContextMenu);\r\n    document.addEventListener('click', onLeftClick);\r\n\r\n    log('‚úÖ Event listeners registered');\r\n\r\n    return () => {\r\n      log('üóëÔ∏è Cleaning up event listeners');\r\n      document.removeEventListener('contextmenu', onContextMenu);\r\n      document.removeEventListener('click', onLeftClick);\r\n    };\r\n  }, [openOn, handleGlobalClick, disabled, log]);\r\n\r\n  useEffect(() => {\r\n    if (!open || !closeOnOutsideClick) return;\r\n\r\n    const onDocClick = (e: MouseEvent) => {\r\n      if (menuRef.current?.contains(e.target as Node)) return;\r\n      log('Click outside menu - closing');\r\n      closeMenu();\r\n    };\r\n\r\n    document.addEventListener('mousedown', onDocClick);\r\n    return () => document.removeEventListener('mousedown', onDocClick);\r\n  }, [open, closeOnOutsideClick, closeMenu, log]);\r\n\r\n  useEffect(() => {\r\n    if (!open || !keyboardNavigation || !items) return;\r\n\r\n    const onKey = (ev: KeyboardEvent) => {\r\n      if (ev.key === 'Escape') {\r\n        ev.preventDefault();\r\n        closeMenu();\r\n        return;\r\n      }\r\n\r\n      const visibleItems = items.filter((it) => !it.disabled && !it.separator);\r\n      if (visibleItems.length === 0) return;\r\n\r\n      if (ev.key === 'ArrowDown') {\r\n        ev.preventDefault();\r\n        let next = focusIndex;\r\n        for (let i = 1; i <= items.length; i++) {\r\n          const idx = (focusIndex + i) % items.length;\r\n          const it = items[idx];\r\n          if (!it.disabled && !it.separator) {\r\n            next = idx;\r\n            break;\r\n          }\r\n        }\r\n        setFocusIndex(next);\r\n      } else if (ev.key === 'ArrowUp') {\r\n        ev.preventDefault();\r\n        let prev = focusIndex;\r\n        for (let i = 1; i <= items.length; i++) {\r\n          const idx = (focusIndex - i + items.length) % items.length;\r\n          const it = items[idx];\r\n          if (!it.disabled && !it.separator) {\r\n            prev = idx;\r\n            break;\r\n          }\r\n        }\r\n        setFocusIndex(prev);\r\n      } else if (ev.key === 'Enter') {\r\n        ev.preventDefault();\r\n        const it = items[focusIndex];\r\n        if (it && !it.disabled && !it.separator) {\r\n          handleItemSelect(it);\r\n        }\r\n      }\r\n    };\r\n\r\n    document.addEventListener('keydown', onKey);\r\n    return () => document.removeEventListener('keydown', onKey);\r\n  }, [open, keyboardNavigation, items, focusIndex, handleItemSelect, closeMenu]);\r\n\r\n  useEffect(() => {\r\n    if (!open || focusIndex < 0 || !items) return;\r\n\r\n    requestAnimationFrame(() => {\r\n      itemsRefs.current[focusIndex]?.focus();\r\n    });\r\n  }, [focusIndex, open, items]);\r\n\r\n  useEffect(() => {\r\n    log('Menu open state changed:', open);\r\n  }, [open, log]);\r\n\r\n  useEffect(() => {\r\n    log('Menu items changed:', items);\r\n  }, [items, log]);\r\n\r\n  if (!open) return null;\r\n\r\n  const menuContent = (\r\n    <div\r\n      ref={menuRef}\r\n      role=\"menu\"\r\n      className={`resium-entity-contextmenu ${className}`}\r\n      style={{\r\n        position: 'fixed',\r\n        left: x,\r\n        top: y,\r\n        zIndex,\r\n        minWidth: 160,\r\n        padding: 8,\r\n        backgroundColor: 'white',\r\n        border: '1px solid #ddd',\r\n        borderRadius: 6,\r\n        boxShadow: '0 4px 12px rgba(0,0,0,0.15)',\r\n        outline: 'none',\r\n        ...(debug ? { border: '3px solid red' } : {}),\r\n        ...style,\r\n      }}\r\n    >\r\n      {debug && (\r\n        <div style={{ padding: '4px 8px', backgroundColor: '#ffe6e6', fontSize: '12px' }}>\r\n          üêõ DEBUG MODE\r\n        </div>\r\n      )}\r\n\r\n      {loading && <div style={{ padding: '8px 12px', color: '#666' }}>Laden...</div>}\r\n\r\n      {error && <div style={{ padding: '8px 12px', color: '#d32f2f' }}>{error}</div>}\r\n\r\n      {!loading && !error && items && items.length === 0 && (\r\n        <div style={{ padding: '8px 12px', color: '#666' }}>Keine Aktionen verf√ºgbar</div>\r\n      )}\r\n\r\n      {!loading && !error && items && items.length > 0 && (\r\n        <div>\r\n          {items.map((item, idx) => {\r\n            if (item.separator) {\r\n              return (\r\n                <div\r\n                  key={`separator-${idx}`}\r\n                  style={{\r\n                    height: 1,\r\n                    backgroundColor: '#eee',\r\n                    margin: '4px 0',\r\n                  }}\r\n                />\r\n              );\r\n            }\r\n\r\n            const isDisabled = !!item.disabled;\r\n            const isFocused = focusIndex === idx;\r\n\r\n            return (\r\n              <button\r\n                key={item.id}\r\n                ref={(el) => setItemRef(el, idx)}\r\n                role=\"menuitem\"\r\n                disabled={isDisabled}\r\n                tabIndex={-1}\r\n                onClick={() => !isDisabled && handleItemSelect(item)}\r\n                onMouseEnter={() => setFocusIndex(idx)}\r\n                style={{\r\n                  display: 'block',\r\n                  width: '100%',\r\n                  padding: '8px 12px',\r\n                  border: 'none',\r\n                  backgroundColor: isFocused ? '#f5f5f5' : 'transparent',\r\n                  textAlign: 'left',\r\n                  cursor: isDisabled ? 'not-allowed' : 'pointer',\r\n                  borderRadius: 4,\r\n                  opacity: isDisabled ? 0.5 : 1,\r\n                }}\r\n              >\r\n                {renderMenuItem ? (\r\n                  renderMenuItem(item)\r\n                ) : (\r\n                  <div style={{ display: 'flex', alignItems: 'center', gap: 8 }}>\r\n                    {item.icon && <span>{item.icon}</span>}\r\n                    <span>{item.label}</span>\r\n                  </div>\r\n                )}\r\n              </button>\r\n            );\r\n          })}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n\r\n  return portal ? ReactDOM.createPortal(menuContent, document.body) : menuContent;\r\n}\r\n"],"mappings":"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","names":["React","clientX","clientY","x","y","error","ReactDOM"]}