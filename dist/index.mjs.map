{"version":3,"sources":["../src/components/EntityContextMenu.tsx","../src/hooks/useEntityContextMenu.tsx","../src/contexts/ContextMenuProvider.tsx"],"sourcesContent":["import { useRef, useState, useEffect, useCallback, useLayoutEffect } from 'react';\r\nimport { useEntityContextMenu } from '../hooks/useEntityContextMenu';\r\nimport { MenuItem } from '../types/index';\r\nimport '../components/EntityContextMenu.css';\r\nimport { useCesium } from 'resium';\r\nimport { ScreenSpaceEventHandler, ScreenSpaceEventType } from 'cesium';\r\n\r\nexport const EntityContextMenu: React.FC<{ className?: string }> = ({ className = '' }) => {\r\n  const { isVisible, context, menuItems, isLoading, hideMenu } = useEntityContextMenu();\r\n  const menuRef = useRef<HTMLDivElement>(null);\r\n  const [focusedIndex, setFocusedIndex] = useState(0);\r\n  const [openSubmenu, setOpenSubmenu] = useState<string | null>(null);\r\n  const [submenuFocusedIndex, setSubmenuFocusedIndex] = useState<number | null>(null);\r\n  const [menuPosition, setMenuPosition] = useState({ x: 0, y: 0 });\r\n  const [positionCalculated, setPositionCalculated] = useState(false);\r\n  const { viewer } = useCesium();\r\n\r\n  useEffect(() => {\r\n    if (!viewer) return;\r\n\r\n    const handler = new ScreenSpaceEventHandler(viewer.scene.canvas);\r\n\r\n    handler.setInputAction(() => {\r\n      if (isVisible) hideMenu();\r\n    }, ScreenSpaceEventType.RIGHT_DOWN);\r\n\r\n    handler.setInputAction(() => {\r\n      if (isVisible) hideMenu();\r\n    }, ScreenSpaceEventType.LEFT_DOWN);\r\n\r\n    const canvas = viewer.scene.canvas;\r\n    const prevent = (e: Event) => e.preventDefault();\r\n    canvas.addEventListener('contextmenu', prevent);\r\n\r\n    return () => {\r\n      handler.destroy();\r\n      canvas.removeEventListener('contextmenu', prevent);\r\n    };\r\n  }, [viewer?.scene.canvas, isVisible, hideMenu]);\r\n\r\n  const computeMenuPosition = (ctx: typeof context, menuEl: HTMLDivElement | null) => {\r\n    if (!ctx) return { x: 0, y: 0 };\r\n\r\n    let x = ctx.position?.x ?? 0;\r\n    let y = ctx.position?.y ?? 0;\r\n\r\n    if (!menuEl) {\r\n      return { x, y };\r\n    }\r\n\r\n    const rect = menuEl.getBoundingClientRect();\r\n    const viewportWidth = window.innerWidth;\r\n    const viewportHeight = window.innerHeight;\r\n\r\n    if (x + rect.width > viewportWidth - 10) {\r\n      x = Math.max(10, x - rect.width);\r\n    }\r\n    if (y + rect.height > viewportHeight - 10) {\r\n      y = Math.max(10, y - rect.height);\r\n    }\r\n\r\n    return { x, y };\r\n  };\r\n\r\n  useLayoutEffect(() => {\r\n    if (!isVisible || !context) {\r\n      setPositionCalculated(false);\r\n      return;\r\n    }\r\n\r\n    const menuEl = menuRef.current;\r\n    const pos = computeMenuPosition(context, menuEl);\r\n    setMenuPosition(pos);\r\n    setPositionCalculated(true);\r\n  }, [isVisible, context, menuItems]);\r\n\r\n  useEffect(() => {\r\n    if (!isVisible) return;\r\n\r\n    const handleOutsideInteraction = (e: MouseEvent) => {\r\n      if (menuRef.current && !menuRef.current.contains(e.target as Node)) {\r\n        hideMenu();\r\n      }\r\n    };\r\n    const handleScroll = () => hideMenu();\r\n    const handleEscape = (evt: KeyboardEvent) => {\r\n      if (evt.key === 'Escape') hideMenu();\r\n    };\r\n\r\n    document.addEventListener('mousedown', handleOutsideInteraction);\r\n    document.addEventListener('click', handleOutsideInteraction);\r\n    document.addEventListener('scroll', handleScroll, true);\r\n    document.addEventListener('wheel', handleScroll, true);\r\n    document.addEventListener('keydown', handleEscape);\r\n\r\n    return () => {\r\n      document.removeEventListener('mousedown', handleOutsideInteraction);\r\n      document.removeEventListener('click', handleOutsideInteraction);\r\n      document.removeEventListener('scroll', handleScroll, true);\r\n      document.removeEventListener('wheel', handleScroll, true);\r\n      document.removeEventListener('keydown', handleEscape);\r\n    };\r\n  }, [isVisible, hideMenu]);\r\n\r\n  useEffect(() => {\r\n    if (isVisible && positionCalculated && menuRef.current) {\r\n      menuRef.current.focus();\r\n    }\r\n  }, [isVisible, positionCalculated]);\r\n\r\n  useEffect(() => {\r\n    setFocusedIndex(0);\r\n    setOpenSubmenu(null);\r\n    setSubmenuFocusedIndex(null);\r\n  }, [menuItems]);\r\n\r\n  const isItemEnabled = useCallback(\r\n    (item: MenuItem) => {\r\n      if (!item.enabled) return true;\r\n      if (typeof item.enabled === 'boolean') return item.enabled;\r\n      return !!context && item.enabled(context);\r\n    },\r\n    [context],\r\n  );\r\n\r\n  const handleKeyDown = useCallback(\r\n    (e: React.KeyboardEvent) => {\r\n      if (!menuItems || menuItems.length === 0) return;\r\n\r\n      const visibleItems = menuItems.filter(\r\n        (item) => item.type !== 'separator' && (!item.visible || item.visible(context!)),\r\n      );\r\n\r\n      if (visibleItems.length === 0) return;\r\n\r\n      if (submenuFocusedIndex !== null && openSubmenu) {\r\n        const currentItem = visibleItems[focusedIndex];\r\n        if (currentItem?.type === 'submenu' && currentItem.items) {\r\n          const visibleSubmenuItems = currentItem.items.filter(\r\n            (item) => item.type !== 'separator' && (!item.visible || item.visible(context!)),\r\n          );\r\n\r\n          switch (e.key) {\r\n            case 'ArrowDown':\r\n              e.preventDefault();\r\n              setSubmenuFocusedIndex((prev) =>\r\n                prev === null ? 0 : (prev + 1) % visibleSubmenuItems.length,\r\n              );\r\n              break;\r\n            case 'ArrowUp':\r\n              e.preventDefault();\r\n              setSubmenuFocusedIndex((prev) =>\r\n                prev === null\r\n                  ? 0\r\n                  : (prev - 1 + visibleSubmenuItems.length) % visibleSubmenuItems.length,\r\n              );\r\n              break;\r\n            case 'Enter':\r\n            case ' ':\r\n              e.preventDefault();\r\n              {\r\n                const focusedSubItem = visibleSubmenuItems[submenuFocusedIndex];\r\n                if (!focusedSubItem) break;\r\n\r\n                const enabled = isItemEnabled(focusedSubItem);\r\n                if (!enabled) break;\r\n\r\n                if (focusedSubItem.onClick) {\r\n                  const res = focusedSubItem.onClick(context!);\r\n                  if (res instanceof Promise) {\r\n                    res.finally(() => hideMenu());\r\n                  } else {\r\n                    hideMenu();\r\n                  }\r\n                }\r\n              }\r\n              break;\r\n            case 'ArrowLeft':\r\n              e.preventDefault();\r\n              setSubmenuFocusedIndex(null);\r\n              break;\r\n            case 'Escape':\r\n              e.preventDefault();\r\n              setOpenSubmenu(null);\r\n              setSubmenuFocusedIndex(null);\r\n              break;\r\n          }\r\n          return;\r\n        }\r\n      }\r\n\r\n      switch (e.key) {\r\n        case 'ArrowDown':\r\n          e.preventDefault();\r\n          setFocusedIndex((prev) => (prev + 1) % visibleItems.length);\r\n          setSubmenuFocusedIndex(null);\r\n          break;\r\n        case 'ArrowUp':\r\n          e.preventDefault();\r\n          setFocusedIndex((prev) => (prev - 1 + visibleItems.length) % visibleItems.length);\r\n          setSubmenuFocusedIndex(null);\r\n          break;\r\n        case 'Enter':\r\n        case ' ':\r\n          e.preventDefault();\r\n          {\r\n            const focusedItem = visibleItems[focusedIndex];\r\n            if (!focusedItem) break;\r\n\r\n            const enabled = isItemEnabled(focusedItem);\r\n            if (!enabled) break;\r\n\r\n            if (focusedItem.type === 'submenu' && focusedItem.items) {\r\n              setOpenSubmenu(focusedItem.id);\r\n              setSubmenuFocusedIndex(0);\r\n            } else if (focusedItem.onClick) {\r\n              const res = focusedItem.onClick(context!);\r\n              if (res instanceof Promise) {\r\n                res.finally(() => hideMenu());\r\n              } else {\r\n                hideMenu();\r\n              }\r\n            }\r\n          }\r\n          break;\r\n        case 'ArrowRight': {\r\n          const item = visibleItems[focusedIndex];\r\n          if (item?.type === 'submenu' && item.items) {\r\n            e.preventDefault();\r\n            setOpenSubmenu(item.id);\r\n            setSubmenuFocusedIndex(0);\r\n          }\r\n          break;\r\n        }\r\n        case 'ArrowLeft':\r\n          e.preventDefault();\r\n          setOpenSubmenu(null);\r\n          setSubmenuFocusedIndex(null);\r\n          break;\r\n      }\r\n    },\r\n    [menuItems, context, focusedIndex, submenuFocusedIndex, openSubmenu, hideMenu, isItemEnabled],\r\n  );\r\n\r\n  if (!isVisible) return null;\r\n\r\n  const renderMenuItem = (\r\n    item: MenuItem,\r\n    index: number,\r\n    parentId?: string,\r\n    visibleItemIndex?: number,\r\n    isSubmenuItem?: boolean,\r\n  ): React.ReactNode => {\r\n    if (!context) return null;\r\n\r\n    if (item.visible && !item.visible(context)) {\r\n      return null;\r\n    }\r\n\r\n    const isEnabled = isItemEnabled(item);\r\n    const isFocused = isSubmenuItem\r\n      ? submenuFocusedIndex === visibleItemIndex\r\n      : visibleItemIndex !== undefined && visibleItemIndex === focusedIndex;\r\n\r\n    if (item.type === 'separator') {\r\n      return <div key={item.id ?? `sep-${index}`} className=\"ecm-separator\" />;\r\n    }\r\n\r\n    if (item.type === 'custom' && item.render) {\r\n      return (\r\n        <div key={item.id ?? `custom-${index}`} className=\"ecm-custom\">\r\n          {item.render(context)}\r\n        </div>\r\n      );\r\n    }\r\n\r\n    const handleClick = async () => {\r\n      if (!isEnabled) return;\r\n\r\n      if (item.type === 'submenu' && item.items) {\r\n        setOpenSubmenu(openSubmenu === item.id ? null : item.id);\r\n      } else if (item.onClick) {\r\n        try {\r\n          const res = item.onClick(context);\r\n          if (res instanceof Promise) await res;\r\n        } finally {\r\n          hideMenu();\r\n        }\r\n      }\r\n    };\r\n\r\n    const itemKey = parentId ? `${parentId}__${item.id ?? index}` : `${item.id ?? index}`;\r\n\r\n    return (\r\n      <div\r\n        key={itemKey}\r\n        role=\"menuitem\"\r\n        tabIndex={isFocused ? 0 : -1}\r\n        onContextMenu={(e) => e.preventDefault()}\r\n        className={[\r\n          'ecm-item',\r\n          isEnabled ? 'ecm-item--enabled' : 'ecm-item--disabled',\r\n          isFocused ? 'ecm-item--focused' : '',\r\n          item.type === 'toggle' ? 'ecm-item--toggle' : '',\r\n          item.type === 'submenu' ? 'ecm-item--submenu' : '',\r\n        ]\r\n          .join(' ')\r\n          .trim()}\r\n        onClick={handleClick}\r\n        onMouseEnter={() => {\r\n          if (isSubmenuItem && visibleItemIndex !== undefined) {\r\n            setSubmenuFocusedIndex(visibleItemIndex);\r\n          } else if (visibleItemIndex !== undefined) {\r\n            setFocusedIndex(visibleItemIndex);\r\n            setSubmenuFocusedIndex(null);\r\n          }\r\n        }}\r\n      >\r\n        {item.type === 'toggle' && (item as any).checked && (\r\n          <span className=\"ecm-checkmark\">✓</span>\r\n        )}\r\n\r\n        <span className=\"ecm-item__label\">{item.label}</span>\r\n\r\n        {item.type === 'submenu' && <span className=\"ecm-item__submenu-indicator\">▶</span>}\r\n\r\n        {item.type === 'submenu' && openSubmenu === item.id && item.items && (\r\n          <div className=\"ecm-submenu\">\r\n            {(() => {\r\n              let submenuVisibleIndex = 0;\r\n              return item.items.map((subItem, subIndex) => {\r\n                const shouldRender = !subItem.visible || subItem.visible(context!);\r\n                const isActuallyVisible = shouldRender && subItem.type !== 'separator';\r\n                const currentSubmenuIndex = isActuallyVisible ? submenuVisibleIndex : undefined;\r\n\r\n                if (isActuallyVisible) {\r\n                  submenuVisibleIndex++;\r\n                }\r\n\r\n                return renderMenuItem(subItem, subIndex, item.id, currentSubmenuIndex, true);\r\n              });\r\n            })()}\r\n          </div>\r\n        )}\r\n      </div>\r\n    );\r\n  };\r\n\r\n  if (!isVisible) return null;\r\n  return (\r\n    <div\r\n      ref={menuRef}\r\n      role=\"menu\"\r\n      tabIndex={-1}\r\n      onContextMenu={(e) => e.preventDefault()}\r\n      className={`ecm-menu ${className}`}\r\n      style={{\r\n        left: `${menuPosition.x}px`,\r\n        top: `${menuPosition.y}px`,\r\n        visibility: positionCalculated ? 'visible' : 'hidden',\r\n        opacity: positionCalculated ? 1 : 0,\r\n        transition: 'opacity 0.1s ease-in-out',\r\n      }}\r\n      onKeyDown={handleKeyDown}\r\n    >\r\n      {isLoading ? (\r\n        <div className=\"ecm-loading\">Loading menu...</div>\r\n      ) : menuItems && menuItems.length > 0 ? (\r\n        <div className=\"ecm-list\">\r\n          {(() => {\r\n            let visibleItemIndex = 0;\r\n            return menuItems.map((item, index) => {\r\n              const shouldRender = !item.visible || item.visible(context!);\r\n              const isActuallyVisible = shouldRender && item.type !== 'separator';\r\n              const currentVisibleIndex = isActuallyVisible ? visibleItemIndex : undefined;\r\n\r\n              if (isActuallyVisible) {\r\n                visibleItemIndex++;\r\n              }\r\n\r\n              return renderMenuItem(item, index, undefined, currentVisibleIndex);\r\n            });\r\n          })()}\r\n        </div>\r\n      ) : (\r\n        <div className=\"ecm-empty\">No actions available</div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n","import { useContext } from 'react';\r\nimport { ContextMenuContext } from '../contexts/ContextMenuProvider';\r\n\r\nexport function useEntityContextMenu() {\r\n  const context = useContext(ContextMenuContext);\r\n  if (!context) {\r\n    throw new Error('useEntityContextMenu must be used within EntityContextMenuProvider');\r\n  }\r\n  return context;\r\n}\r\n","import { createContext, useState, useCallback } from 'react';\r\nimport {\r\n  ContextMenuState,\r\n  EntityContext,\r\n  MenuFactory,\r\n  MenuItem,\r\n  EntityContextMenuProviderProps,\r\n} from '../types/index';\r\n\r\nexport const ContextMenuContext = createContext<ContextMenuState | null>(null);\r\n\r\nexport const EntityContextMenuProvider: React.FC<EntityContextMenuProviderProps> = ({\r\n  children,\r\n  defaultFactory,\r\n  factoriesByType = {},\r\n  onOpen,\r\n  onClose,\r\n}) => {\r\n  const [isVisible, setIsVisible] = useState(false);\r\n  const [context, setContext] = useState<EntityContext | undefined>();\r\n  const [menuItems, setMenuItems] = useState<MenuItem[] | undefined>();\r\n  const [isLoading, setIsLoading] = useState(false);\r\n\r\n  const resolveFactory = useCallback(\r\n    (ctx: EntityContext): MenuFactory => {\r\n      if (ctx.entityData?.menuFactory && typeof ctx.entityData.menuFactory === 'function') {\r\n        return ctx.entityData.menuFactory;\r\n      }\r\n      if (ctx.entityType && factoriesByType[ctx.entityType]) {\r\n        return factoriesByType[ctx.entityType];\r\n      }\r\n      return defaultFactory;\r\n    },\r\n    [defaultFactory, factoriesByType],\r\n  );\r\n\r\n  const showMenu = useCallback(\r\n    async (ctx: EntityContext) => {\r\n      setContext(ctx);\r\n      setIsVisible(true);\r\n      setIsLoading(true);\r\n      setMenuItems(undefined);\r\n\r\n      onOpen?.(ctx);\r\n\r\n      try {\r\n        const factory = resolveFactory(ctx);\r\n        const items = await factory(ctx);\r\n        setMenuItems(items);\r\n      } catch (error) {\r\n        console.error('Failed to resolve menu items:', error);\r\n        setMenuItems([]);\r\n      } finally {\r\n        setIsLoading(false);\r\n      }\r\n    },\r\n    [resolveFactory, onOpen],\r\n  );\r\n\r\n  const hideMenu = useCallback(() => {\r\n    setIsVisible(false);\r\n    setContext(undefined);\r\n    setMenuItems(undefined);\r\n    setIsLoading(false);\r\n    onClose?.();\r\n  }, [onClose]);\r\n\r\n  const value: ContextMenuState = {\r\n    isVisible,\r\n    context,\r\n    menuItems,\r\n    isLoading,\r\n    showMenu,\r\n    hideMenu,\r\n  };\r\n\r\n  return <ContextMenuContext.Provider value={value}>{children}</ContextMenuContext.Provider>;\r\n};\r\n"],"mappings":"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","names":["useState","useCallback","jsx","useState","useCallback"]}